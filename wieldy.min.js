var Wieldable=function(a){var b,c=[],g=()=>{for(var j=0;j<c.length;j++)'function'==typeof c[j]&&c[j](b)},h=function(j){if(void 0!=j){if(b=j,j instanceof Array){function p(q,...s){var u=b[q](...s);return g(),u}h.push=function(...q){return p('push',...q)},h.pop=function(...q){return p('pop',...q)},h.shift=function(...q){return p('shift',...q)},h.unshift=function(...q){return p('unshift',...q)},h.splice=function(...q){return p('splice',...q)},h.slice=function(...q){return p('slice',...q)},Object.defineProperty(h,'length',{get:function(){return b.length}})}else if('object'==typeof j)for(var m in j)h[m]=new Wieldable(j[m]);else h.push&&delete h.push,h.pop&&delete h.pop,h.shift&&delete h.shift,h.unshift&&delete h.unshift,h.splice&&delete h.splice,h.slice&&delete h.slice;g()}if('object'==typeof b&&!(b instanceof Array)){var n={};for(var m in h)'function'==typeof h[m]&&'wieldable'==h[m].name&&(n[m]=h[m]());return n}return b};return h.observe=j=>{if('function'==typeof j)return c.push(j),{stop:()=>{c.splice(c.indexOf(j),1)},start:()=>c.push(j)}},h.bind=function(j,m,n){if(n)return j.addEventListener(m,function(){h(j.value)}),j.value&&h(j.value),h.observe(function(q){j.value=q});h.template=j[m];var p=h.observe(function(q){b instanceof Array&&h.template?(j[m]='',b.forEach((s,u)=>{var w=h.template;if('object'==typeof s)for(k in s)w=w.split('${'+k+'}').join(s[k]);else w=w.split('${index}').join(u),w=w.split('${value}').join(s);j[m]+=w})):j[m]=q});return j[m]=b,p},h(a),h};function WieldyScope(a,b){var c=this;if(c.debug=!1,c.run=function(h){h.querySelectorAll('[bind]').forEach(j=>{var m=j.getAttribute('bind'),n=!1;return m?void(m=m.split(','),m.forEach(function(p){if(null!==p.match(':')){p=p.split(':');var q=p[0],s=p[1];if(!q||!s)return console.log('No bindings were defined'),!1;if(null!==q.match('-on')&&(q=q.replace('-on',''),n=!0),c[q]=c[q]||new Wieldable,n)c[q].bind(j,s,!0),c.debug?console.log(j,s,!0):null;else return c[q](j[s]?j[s]:''),c[q].bind(j,s),null!=j[s].match(/\$\{.*}/g)&&c[q]([]),c.debug?console.log(j,s):null,c}else return console.log('No bindings were defined'),!1})):(console.error('No bindings were defined'),!1)})},b)for(var g in b)c[g]=new Wieldable(b[g]);a&&c.run(a)}
